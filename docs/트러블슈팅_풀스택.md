---

## 영화 상영 스케줄 크롤링 시간을 어떻게 단축할 수 있을까?

문제1

- 영화 상영 정보에 대한 하루치 데이터를 크롤링 하는데 120분이 걸리는 상황

해결1

- 멀티 프로세싱을 사용해 40분으로 단축 (3배)

문제 2

- 일주일치 데이터를 크롤링 하는데, 40 x 7 = 280분이 걸리는 상황
- 추가 시간 단축을 위해 멀티스레딩 시도 했으나 context switching 문제 발생

해결 2

- 멀티프로세싱만 사용하기로 결정
- 프로세스 최적화
    - 최대 가용한 cpu 수에 맞게 프로세스 수 설정
    - 크롤링 대상의 크기에 따라 프로세스 별 사이즈 설정
- 새롭게 업데이트되는 하루치 데이터만 크롤링하기로 결정
- ⇒25분으로 단축 (11배)

---

## 인공지능 Python 코드를 구동하기 위한, 효율적인 아키텍처를 어떻게 설계할까?

### 문제1

- 인공지능 팀에서 Python 코드를 작성하기 때문에, 이를 구동시키기 위한 방법이 고민되는 상황
- 선택지
    - Spring 애플리케이션에서 Jython을 사용해 구동
    - Python 코드를 구동시키기 위한 서버를 따로 분리

### 해결

- Spring 애플리케이션에서 Jython을 사용해 구동하기로 결정
- 서버를 분리할 시, 서버 간 통신과정 추가로 인해 지연 시간 증가 및 유지보수 비용 증가가 예상되었기 때문

### 문제2

- Jython이 Python 2.7까지 지원해서, 최신 라이브러리와의 호환성 문제
- 외부 패키지를 설치하기 어려운 문제

### 해결

- 서버를 두 개로 분리해, FastAPI에서 구동해서 해결
- 효과
    - 책임 분산 및 확장성 개선
        - AI 코드 실행에 대한 책임을 FastAPI가 맡음으로써, Spring 애플리케이션은 비즈니스 로직에 집중 가능하고, 이로 인해 확장성 및 유지보수성이 상승함
    - 장애 격리로 안정성 강화
        - AI 코드 실행이 리소스를 많이 소모하기 때문에, 이로 인한 장애 발생 시 Spring 애플리케이션에 문제 전염되는 것을 차단
    - 성능 및 처리 효율성 증가
        - FastAPI는 비동기 처리를 잘 지원해서, AI 작업을 보다 빠르고 효율적으로 처리 가능

---

## 여러 객체에 흩어져있는 정보를 어떻게 한 번에 묶을 수 있을까?

### 문제

- 영화 상영 정보, 영화관 객체를 사용해 영화관 별 상영정보를 얻어야 하는 상황

### 해결

- stream의 groupingBy, mapping을 사용해 해결

```java
Map<String, List<Time>> timesPerTheaterNameMap = dto.stream()
                .collect(
	                groupingBy(
		                d -> d.getTheater().getName(), 
		                mapping(d -> d.getMovieInfo().getTime(), toList())
	                )
                );
```

---

## 영화 상영 스케줄 크롤링 시간을 어떻게 단축할 수 있을까?

### 문제1

- 영화 상영 정보에 대한 하루치 데이터를 크롤링 하는데 120분이 걸리는 상황

### 해결1

- 멀티 프로세싱을 사용해 40분으로 단축 (3배)

### 문제 2

- 일주일치 데이터를 크롤링 하는데, 40 x 7 = 280분이 걸리는 상황
- 추가 시간 단축을 위해 멀티스레딩 시도 했으나 context switching 문제 발생

### 해결 2

- 멀티프로세싱만 사용하기로 결정
- 프로세스 최적화
    - 최대 가용한 cpu 수에 맞게 프로세스 수 설정
    - 크롤링 대상의 크기에 따라 프로세스 별 사이즈 설정
- 새롭게 업데이트되는 하루치 데이터만 크롤링하기로 결정
- ⇒ 25분으로 단축 (11배)

---

## 상태의 변경 사항을 즉시 반영할 수 없을까?

### 문제

- React에서 상태 변경 시 useEffect만으로는 최신 상태 반영 불가
- 변경된 값을 다른 곳에서 참조하면 최신 값이 아닌 이전 값이 참조되어 데이터 오류 발생

### **해결**

- useEffect는 상태 변경을 감지하지만, 다른 함수나 이벤트에서 최신 상태값을 바로 참조할 수 없는 문제가 발생함을 파악
- 이를 해결하기 위해 useRef를 함께 사용하여 상태 변경 사항이 즉시 데이터에 반영되도록 구현